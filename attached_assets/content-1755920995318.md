[Skip to main content](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html#main-content)

`Ctrl` + `K`

Neuron 2.25.0 is released! Check [What's New](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/release-notes/index.html) and [Announcements](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/announcements/index.html) for more details.

[![Logo image](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/_static/Site-Merch_Neuron-ML-SDK_Editorial.png)![Logo image](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/_static/Site-Merch_Neuron-ML-SDK_Editorial.png)](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/index.html)

`Ctrl` + `K`

**Search Engine:**DefaultGoogle

- [Repository](https://github.com/aws-neuron/aws-neuron-sdk)
- [Suggest edit](https://github.com/aws-neuron/aws-neuron-sdk/edit/master/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.rst)
- [Open issue](https://github.com/aws-neuron/aws-neuron-sdk/issues/new?title=Issue%20on%20page%20%2Fgeneral/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html&body=Your%20issue%20content%20here.)

- [.rst](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/_sources/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.rst)
- .pdf

# PyTorch Neuron (“torch-neuronx”) Setup on Ubuntu 22

## Contents

_This document is relevant for_: `Inf2`, `Trn1`, `Trn2`

Select a Different Framework or Platform for Setup

# PyTorch Neuron (“torch-neuronx”) Setup on Ubuntu 22 [\#](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#pytorch-neuron-torch-neuronx-setup-on-ubuntu-22 "Permalink to this heading")

## [Get Started with Latest Release of PyTorch Neuron ( `torch-neuronx`)](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#id1) [\#](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#get-started-with-latest-release-of-pytorch-neuron-torch-neuronx "Permalink to this heading")

This section provide links that will assist you to quickly start with a fresh installation of [PyTorch Neuron](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/frameworks/torch/index.html#pytorch-neuronx-main) for both Inference and Training.

Note

If you are facing a connectivity issue during the model loading process on a Trn1 instance with Ubuntu, that could probably be because of Ubuntu limitations with multiple interfaces. To solve this problem, please follow the steps mentioned [here](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/frameworks/torch/torch-neuronx/training-troubleshooting.html#trn1-ubuntu-troubleshooting).

Users are highly encouraged to use DLAMI to launch the instances, since DLAMIs come with the required fix.

Launch the Instance

- Please follow the instructions at [launch an Amazon EC2 Instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance) to launch an instance. When choosing the instance type at the EC2 console, please make sure to select the correct instance type.

- To get more information about instances sizes and pricing see: [Trn1 web page](https://aws.amazon.com/ec2/instance-types/trn1/), [Inf2 web page](https://aws.amazon.com/ec2/instance-types/inf2/)

- Select Ubuntu Server 22 AMI

- When launching a Trn1, please adjust your primary EBS volume size to a minimum of 512GB.

- After launching the instance, follow the instructions in [Connect to your instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html) to connect to the instance


Install Drivers and Tools

```
# Configure Linux for Neuron repository updates
. /etc/os-release
sudo tee /etc/apt/sources.list.d/neuron.list > /dev/null <<EOF
deb https://apt.repos.neuron.amazonaws.com ${VERSION_CODENAME} main
EOF
wget -qO - https://apt.repos.neuron.amazonaws.com/GPG-PUB-KEY-AMAZON-AWS-NEURON.PUB | sudo apt-key add -

# Update OS packages
sudo apt-get update -y

# Install OS headers
sudo apt-get install linux-headers-$(uname -r) -y

# Install git
sudo apt-get install git -y

# install Neuron Driver
sudo apt-get install aws-neuronx-dkms=2.* -y

# Install Neuron Runtime
sudo apt-get install aws-neuronx-collectives=2.* -y
sudo apt-get install aws-neuronx-runtime-lib=2.* -y

# Install Neuron Tools
sudo apt-get install aws-neuronx-tools=2.* -y

# Add PATH
export PATH=/opt/aws/neuron/bin:$PATH

```

Copy to clipboard

Install EFA (Applicable only for `Trn1\Trn1n\Trn2`)

```
# Install EFA Driver (only required for multi-instance training)
curl -O https://efa-installer.amazonaws.com/aws-efa-installer-latest.tar.gz
wget https://efa-installer.amazonaws.com/aws-efa-installer.key && gpg --import aws-efa-installer.key
cat aws-efa-installer.key | gpg --fingerprint
wget https://efa-installer.amazonaws.com/aws-efa-installer-latest.tar.gz.sig && gpg --verify ./aws-efa-installer-latest.tar.gz.sig
tar -xvf aws-efa-installer-latest.tar.gz
cd aws-efa-installer && sudo bash efa_installer.sh --yes
cd
sudo rm -rf aws-efa-installer-latest.tar.gz aws-efa-installer

```

Copy to clipboard

Install PyTorch Neuron (torch-neuronx)

PyTorch 2.7.0

```
# Install Python venv
sudo apt-get install -y python3.10-venv g++

# Create Python venv
python3.10 -m venv aws_neuron_venv_pytorch

# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate
python -m pip install -U pip

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Install Neuron Compiler and Framework
python -m pip install neuronx-cc==2.* torch-neuronx torchvision

```

Copy to clipboard

PyTorch 2.6.0

```
# Install Python venv
sudo apt-get install -y python3.10-venv g++

# Create Python venv
python3.10 -m venv aws_neuron_venv_pytorch

# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate
python -m pip install -U pip

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Install Neuron Compiler and Framework
python -m pip install neuronx-cc==2.* torch-neuronx==2.6.* torchvision

```

Copy to clipboard

Visit PyTorch Neuron( `torch-neuronx`) for Inference section

Visit PyTorch Neuron( `torch-neuronx`) for Training section

## [Update to latest PyTorch NeuronX](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#id2) [\#](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#update-to-latest-pytorch-neuronx "Permalink to this heading")

If you already have a previous Neuron release installed, this section provide links that will assist you to update to latest Neuron release.

PyTorch 2.7.0

Note

- Instructions in this page only apply to setting up Neuron components on Linux host running Ubuntu or Amazon Linux AMI.

- When launching a Trn1/Trn2, please adjust your primary EBS volume size to a minimum of 512GB.


```
# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Update Neuron Compiler and Framework
python -m pip install --upgrade neuronx-cc==2.* torch-neuronx torchvision

```

Copy to clipboard

PyTorch 2.6.0

Note

- Instructions in this page only apply to setting up Neuron components on Linux host running Ubuntu or Amazon Linux AMI.

- When launching a Trn1/Trn2, please adjust your primary EBS volume size to a minimum of 512GB.


```
# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Update Neuron Compiler and Framework
python -m pip install --upgrade neuronx-cc==2.* torch-neuronx==2.6.* torchvision

```

Copy to clipboard

## [Install Previous PyTorch NeuronX Releases for Ubuntu](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#id3) [\#](https://awsdocs-neuron.readthedocs-hosted.com/en/latest/general/setup/neuron-setup/pytorch/neuronx/ubuntu/torch-neuronx-ubuntu22.html\#install-previous-pytorch-neuronx-releases-for-ubuntu "Permalink to this heading")

This section will assist you to install previous Neuron releases.

Neuron 2.24.0

```
# Install Python venv
sudo apt-get install -y python3.10-venv g++

# Create Python venv
python3.10 -m venv aws_neuron_venv_pytorch

# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate
python -m pip install -U pip

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Install Neuron Compiler and Framework
python -m pip install neuronx-cc==2.19.8089.0 torch-neuronx==2.7.0.2.8.6734

```

Copy to clipboard

Neuron 2.23.0

```
# Install Python venv
sudo apt-get install -y python3.10-venv g++

# Create Python venv
python3.10 -m venv aws_neuron_venv_pytorch

# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate
python -m pip install -U pip

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Install Neuron Compiler and Framework
python -m pip install neuronx-cc==2.18.121.0 torch-neuronx==2.6.0.2.7.5413

```

Copy to clipboard

Neuron 2.22.0

```
# Install Python venv
sudo apt-get install -y python3.10-venv g++

# Create Python venv
python3.10 -m venv aws_neuron_venv_pytorch

# Activate Python venv
source aws_neuron_venv_pytorch/bin/activate
python -m pip install -U pip

# Install Jupyter notebook kernel
pip install ipykernel
python3.10 -m ipykernel install --user --name aws_neuron_venv_pytorch --display-name "Python (torch-neuronx)"
pip install jupyter notebook
pip install environment_kernels

# Set pip repository pointing to the Neuron repository
python -m pip config set global.index-url https://pip.repos.neuron.amazonaws.com

# Install wget, awscli
python -m pip install wget
python -m pip install awscli

# Install Neuron Compiler and Framework
python -m pip install neuronx-cc==2.17.194.0 torch-neuronx==2.5.1.2.6.0

```

Copy to clipboard

_This document is relevant for_: `Inf2`, `Trn1`, `Trn2`

Contents